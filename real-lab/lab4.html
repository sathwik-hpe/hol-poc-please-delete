<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPE Lab - Exercise 4: Create Backup</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ HPE SilverCreek Hands-On Lab</h1>
            <p class="subtitle">Exercise 4: Create System Backup</p>
        </header>

        <div class="success-banner">
            <h2>üíæ Backup Configuration & Creation</h2>
            <p>Learn how to configure backup storage and create system backups</p>
        </div>

        <div class="lab-content">
            <section class="instructions">
                <h2>Exercise 4: Create System Backup</h2>
                
                <div class="info-box">
                    <h3>üìã Objective</h3>
                    <p>Configure a Backup Storage Location (BSL) and create a full system backup. Backups contain resource templates and persistent volume snapshots for disaster recovery.</p>
                </div>

                <div class="credentials-box">
                    <h3>üîê Backup Storage Location (BSL) Configuration</h3>
                    <table>
                        <tr>
                            <td><strong>S3 Endpoint:</strong></td>
                            <td><code>https://10.14.183.240:9000</code></td>
                        </tr>
                        <tr>
                            <td><strong>Access Key:</strong></td>
                            <td><code>vmreadwrite</code></td>
                        </tr>
                        <tr>
                            <td><strong>Secret Key:</strong></td>
                            <td><code>shell_pass@123</code></td>
                        </tr>
                        <tr>
                            <td><strong>Bucket Name:</strong></td>
                            <td><code>backup-storage</code></td>
                        </tr>
                        <tr>
                            <td><strong>Region:</strong></td>
                            <td><code>us-east-1</code></td>
                        </tr>
                    </table>
                    <p class="note"><strong>Note:</strong> Copy these values exactly when configuring BSL</p>
                </div>

                <div class="steps">
                    <h3>Part 1: Navigate to Backups Page</h3>
                    <ol>
                        <li>In your lab window, click the <strong>"System"</strong> tab at the top-center of the page</li>
                        <li>On the System page, find and click the <strong>"Backups"</strong> link</li>
                        <li>You should now be on the <strong>Backups</strong> page</li>
                    </ol>

                    <h3>Part 2: Configure Backup Storage Location (BSL)</h3>
                    <ol start="4">
                        <li>If no BSL is configured, you'll see the BSL configuration landing page</li>
                        <li>Click on <strong>"Configure Backup Storage Location"</strong> or similar button</li>
                        <li>Fill in the BSL configuration form with the values shown above:
                            <ul>
                                <li><strong>S3 Endpoint:</strong> <code>https://10.14.183.240:9000</code></li>
                                <li><strong>Access Key:</strong> <code>vmreadwrite</code></li>
                                <li><strong>Secret Key:</strong> <code>shell_pass@123</code></li>
                                <li><strong>Bucket Name:</strong> <code>backup-storage</code></li>
                                <li><strong>Region:</strong> <code>us-east-1</code></li>
                            </ul>
                        </li>
                        <li>Click <strong>"Submit"</strong> or <strong>"Save"</strong> to create the BSL</li>
                        <li>Wait for the success message confirming BSL setup</li>
                    </ol>

                    <h3>Part 3: Create a New Backup</h3>
                    <ol start="9">
                        <li>After BSL is configured, you'll see the backups list page</li>
                        <li>If there are any old/irrelevant backups, you can delete them (optional)</li>
                        <li>Click on <strong>"Backup Now"</strong> or <strong>"Create Backup"</strong> button</li>
                        <li>Enter a unique backup name (e.g., <code>lab-backup-dec-2025</code>)</li>
                        <li>Optionally, add a description (e.g., "Lab exercise backup")</li>
                        <li>Click <strong>"Submit"</strong> or <strong>"Create"</strong> to start the backup</li>
                        <li>The backup process will begin - you'll see it in "In Progress" state</li>
                        <li><strong>Wait 10-30 minutes</strong> for the backup to complete</li>
                        <li>Once complete, the backup status will change to "Completed" or "Available"</li>
                    </ol>

                    <h3>Part 4: Verify Backup (Optional)</h3>
                    <ol start="18">
                        <li>Check that your backup appears in the list</li>
                        <li>Verify the backup name, timestamp, and status</li>
                        <li>Note the backup size and completion time</li>
                    </ol>
                </div>

                <div class="tips-box">
                    <h3>üí° Important Notes</h3>
                    <ul>
                        <li><strong>Processing Time:</strong> Backup creation takes 10-30 minutes</li>
                        <li><strong>In Progress State:</strong> While a backup is in progress, you cannot start another backup, restore, or delete operation</li>
                        <li><strong>Storage Space:</strong> Ensure external storage has sufficient space</li>
                        <li><strong>Unique Names:</strong> Each backup must have a unique name</li>
                        <li><strong>BSL Reconfiguration:</strong> After system upgrades, BSL must be reconfigured</li>
                        <li><strong>Delete from UI:</strong> Always delete backups from UI/TUI, not directly from storage</li>
                    </ul>
                </div>

                <div class="exercise-tasks">
                    <h3>üéØ Tasks to Complete</h3>
                    <div class="task-list">
                        <label class="task-item">
                            <input type="checkbox">
                            <span>Navigate to System ‚Üí Backups</span>
                        </label>
                        <label class="task-item">
                            <input type="checkbox">
                            <span>Configure Backup Storage Location (BSL)</span>
                        </label>
                        <label class="task-item">
                            <input type="checkbox">
                            <span>Enter S3 endpoint, credentials, bucket, and region</span>
                        </label>
                        <label class="task-item">
                            <input type="checkbox">
                            <span>Verify successful BSL configuration</span>
                        </label>
                        <label class="task-item">
                            <input type="checkbox">
                            <span>Click "Backup Now" or "Create Backup"</span>
                        </label>
                        <label class="task-item">
                            <input type="checkbox">
                            <span>Provide backup name and description</span>
                        </label>
                        <label class="task-item">
                            <input type="checkbox">
                            <span>Submit and monitor backup progress</span>
                        </label>
                        <label class="task-item">
                            <input type="checkbox">
                            <span>Wait for backup completion (10-30 min)</span>
                        </label>
                        <label class="task-item">
                            <input type="checkbox">
                            <span>Verify backup appears in the list with "Completed" status</span>
                        </label>
                    </div>
                </div>

                <div class="checkpoint">
                    <h3>‚úÖ Checkpoint</h3>
                    <p>Congratulations! You have successfully:</p>
                    <ul>
                        <li>‚úì Navigated to the Backups page</li>
                        <li>‚úì Configured Backup Storage Location (BSL) with S3-compatible storage</li>
                        <li>‚úì Created a new system backup</li>
                        <li>‚úì Monitored backup progress from "In Progress" to "Completed"</li>
                        <li>‚úì Verified the backup in the backups list</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>üéâ Outstanding!</strong> You now know how to create and manage system backups for disaster recovery!</p>
                </div>

                <div class="button-container">
                    <button onclick="window.location.href='lab3.html'" class="back-btn">
                        ‚Üê Back to Exercise 3
                    </button>
                    <button onclick="alert('Congratulations! You have completed all HPE SilverCreek lab exercises!\n\n‚úì Login & Workspace Selection\n‚úì Dashboard Navigation\n‚úì Generate Support Bundle\n‚úì Create System Backup\n\nYou are now ready to manage HPE SilverCreek systems!')" class="complete-btn">
                        ‚úì Complete All Labs
                    </button>
                </div>
            </section>

            <section class="browser-panel">
                <div class="browser-header">
                    <h3>üåê Lab Environment</h3>
                </div>
                
                <div class="browser-controls">
                    <button onclick="navigateToBackups()" class="launch-window-btn">
                        üíæ Go to Backups Page
                    </button>
                </div>

                <div class="browser-instructions-mini">
                    <p><strong>üí° Quick Tip:</strong> Click the button above to navigate directly to the Backups page. If your session expired, you may need to log in again and select the HPE CSP Operations workspace.</p>
                </div>

                <div class="window-placeholder">
                    <div class="placeholder-visual">
                        <div class="window-preview">
                            <div class="preview-header">
                                <span class="preview-dot"></span>
                                <span class="preview-dot"></span>
                                <span class="preview-dot"></span>
                            </div>
                            <div class="preview-content">
                                <h2>üëà Instructions</h2>
                                <p>BSL & Backup steps</p>
                            </div>
                        </div>
                        <div class="window-arrow">‚Üî</div>
                        <div class="window-preview active">
                            <div class="preview-header">
                                <span class="preview-dot"></span>
                                <span class="preview-dot"></span>
                                <span class="preview-dot"></span>
                            </div>
                            <div class="preview-content">
                                <h2>Backups üëâ</h2>
                                <p>Configure & Create</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <footer>
            <p>HPE SilverCreek Hands-On Lab | Exercise 4 of 4</p>
        </footer>
    </div>

    <script>
        const BACKUPS_URL = 'https://op360-g10s06-vm04.hstlabs.glcp.hpecorp.net/system/backup';
        
        function navigateToBackups() {
            // Try to reuse existing lab window
            const labWindow = window.open('', 'HPELabEnvironment');
            
            if (labWindow && !labWindow.closed && labWindow.location) {
                // Window exists, navigate to backups page
                labWindow.location.href = BACKUPS_URL;
                labWindow.focus();
                alert('‚úÖ Navigating to Backups page!\n\nFollow the exercise instructions to configure BSL and create a backup.');
            } else {
                // Window doesn't exist, open new one
                const newWindow = window.open(BACKUPS_URL, 'HPELabEnvironment');
                if (newWindow) {
                    newWindow.focus();
                    alert('‚úÖ Opened Backups page!\n\nYou may need to log in again if your session expired.\n\nThen follow the exercise instructions.');
                } else {
                    alert('‚ùå Pop-up blocked! Please allow pop-ups and try again.');
                }
            }
        }
    </script>
</body>
</html>
